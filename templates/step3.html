{% extends "layout.html" %}

{% block title %}Шаг 3 - Вставьте данные для parsePage{% endblock %} 

{% block content %}
<h1>Вставьте данные для parsePage</h1>

<div class="step-indicator">
    <div class="step completed">1</div>
    <div class="step completed">2</div>
    <div class="step active">3</div>
    <div class="step">4</div>
</div>

<form method="POST" id="parsePageForm">
    <div class="field-input-group">
        <label class="field-label">query | Поисковый запрос</label>
        <textarea 
            class="field-textarea" 
            name="query"
            rows="1"></textarea>
    </div>
    
    <div class="field-input-group">
        <label class="field-label">url_search_query_page_2 | Ссылка на 2ю страницу поиска</label>
        <textarea 
            class="field-textarea" 
            name="url_search_query_page_2"
            rows="1"></textarea>
    </div>
    
    <div class="field-input-group">
        <label class="field-label">count_of_page_on_pagination | Кол-во страниц в пагинации</label>
        <textarea 
            class="field-textarea" 
            name="count_of_page_on_pagination"
            rows="1"></textarea>
    </div>
    
    <div class="field-input-group">
        <label class="field-label">total_count_of_results | (Опц.) Кол-во найденных результатов</label>
        <textarea 
            class="field-textarea" 
            name="total_count_of_results"
            rows="1"></textarea>
    </div>
    
    <div class="field-input-group">
        <label class="field-label">links_items | Ссылки на товары на странице поиска</label>
        <textarea 
            class="field-textarea" 
            name="links_items"
            rows="1"></textarea>
    </div>
    
    <div class="btn-group">
        <a href="{{ url_for('step2') }}" class="btn btn-secondary">← Назад</a>
        <button type="submit" class="btn btn-primary">Далее →</button>
    </div>
</form>
{% endblock %}

{% block extra_css %}
<style>
    /* Увеличиваем ширину контейнера для этой страницы
    .container {
        max-width: 800px;
    } */
    
    .field-input-group {
        margin-bottom: 15px;
        position: relative;
    }
    
    .field-label {
        display: block;
        margin-bottom: 6px;
        color: #555;
        font-weight: 500;
    }
    
    .field-textarea {
        width: 100%;
        padding: 10px 12px;
        border: 2px solid #e0e0e0;
        border-radius: 5px;
        font-size: 16px;
        font-family: inherit;
        resize: none;
        min-height: 1.5em;
        line-height: 1.5;
        overflow: hidden;
        transition: border-color 0.3s;
    }
    
    .field-textarea:focus {
        outline: none;
        border-color: #667eea;
    }
    
    /* Компактность по вертикали */
    h1 {
        margin-bottom: 8px;
    }
    
    .step-indicator {
        margin-bottom: 20px;
    }
    
    .btn-group {
        margin-top: 20px;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    // Функция автоматического изменения высоты textarea
    function autoResizeTextarea(textarea) {
        // Сбрасываем высоту, чтобы получить правильную scrollHeight
        textarea.style.height = 'auto';
        // Устанавливаем высоту равной scrollHeight (содержимое + padding)
        textarea.style.height = textarea.scrollHeight + 'px';
    }
    
    // Инициализация при загрузке страницы
    document.addEventListener('DOMContentLoaded', function() {
        // Инициализируем автоизменение высоты для всех textarea
        const allTextareas = document.querySelectorAll('.field-textarea');
        allTextareas.forEach(textarea => {
            // Устанавливаем начальную высоту
            autoResizeTextarea(textarea);
            
            // Обработчик изменения содержимого
            textarea.addEventListener('input', function() {
                autoResizeTextarea(this);
            });
        });
    });
</script>
{% endblock %}
