{% extends "layout.html" %}

{% block title %}Шаг 4 - Подтверждение{% endblock %}

{% block content %}
<h1>Шаг 4: Подтверждение данных</h1>

<div class="step-indicator">
    <div class="step completed">1</div>
    <div class="step completed">2</div>
    <div class="step completed">3</div>
    <div class="step active">4</div>
</div>

<div style="margin-bottom: 30px;">
    <h2 style="color: #667eea; margin-bottom: 20px;">Проверьте введенные данные:</h2>
    
    {% if data.selected_fields %}
    <div class="summary-item">
        <strong>Выбранные поля:</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
            {% for field_key, field_description in data.selected_fields.items() %}
            <li><strong>{{ field_key }}:</strong> {{ field_description }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    {% if data.examples_data and data.examples_data.simple %}
    <div class="summary-item">
        <strong>Примеры данных:</strong>
        <pre style="margin-top: 10px; padding: 10px; background: #fff; border: 1px solid #ddd; border-radius: 5px; overflow-x: auto;">{{ data.examples_data | tojson(indent=2) }}</pre>
    </div>
    {% endif %}
    
    {% if data.search_requests_data and data.search_requests_data.search_requests %}
    <div class="summary-item">
        <strong>Поисковые запросы:</strong>
        <pre style="margin-top: 10px; padding: 10px; background: #fff; border: 1px solid #ddd; border-radius: 5px; overflow-x: auto;">{{ data.search_requests_data | tojson(indent=2) }}</pre>
    </div>
    {% endif %}
</div>

<form method="POST">
    <div class="btn-group">
        <a href="{{ url_for('step3') }}" class="btn btn-secondary">← Назад</a>
        <div>
            <input type="hidden" name="confirm" value="yes">
            <button type="submit" class="btn btn-success">Подтвердить и отправить ✓</button>
        </div>
    </div>
</form>
{% endblock %}

